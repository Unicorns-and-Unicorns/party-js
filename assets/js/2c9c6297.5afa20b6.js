"use strict";(self.webpackChunkparty_js_docs=self.webpackChunkparty_js_docs||[]).push([[8754],{3905:function(e,t,r){r.d(t,{Zo:function(){return p},kt:function(){return u}});var n=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(r),u=i,m=d["".concat(l,".").concat(u)]||d[u]||h[u]||a;return r?n.createElement(m,o(o({ref:t},p),{},{components:r})):n.createElement(m,o({ref:t},p))}));function u(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=r.length,o=new Array(a);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var c=2;c<a;c++)o[c]=r[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},6697:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return l},toc:function(){return c},default:function(){return h}});var n=r(7462),i=r(3366),a=(r(7294),r(3905)),o={title:"Design Principles"},s=void 0,l={unversionedId:"design-principles",id:"design-principles",isDocsHomePage:!1,title:"Design Principles",description:"-   Quick Setup: The library is meant to be plug-and-play; no complicated installation setup, no huge config files, just quick effects to get the users started. The implementation of the library is meant to seamlessly and unobtrusively integrate into various web environments, for example SPAs.",source:"@site/docs/design-principles.md",sourceDirName:".",slug:"/design-principles",permalink:"/docs/design-principles",editUrl:"https://github.com/yiliansource/party-js/edit/main/docs/docs/design-principles.md",tags:[],version:"current",frontMatter:{title:"Design Principles"},sidebar:"docs",previous:{title:"Quick Start",permalink:"/docs/"},next:{title:"Contributing",permalink:"/docs/contributing"}},c=[{value:"How the library works",id:"how-the-library-works",children:[{value:"Particles",id:"particles",children:[]},{value:"Emitters",id:"emitters",children:[]},{value:"The Scene",id:"the-scene",children:[]},{value:"The Renderer",id:"the-renderer",children:[]}]}],p={toc:c};function h(e){var t=e.components,r=(0,i.Z)(e,["components"]);return(0,a.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Quick Setup"),": The library is meant to be plug-and-play; no complicated installation setup, no huge config files, just quick effects to get the users started. The implementation of the library is meant to seamlessly and unobtrusively integrate into various web environments, for example SPAs."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Customizability"),": Users of the library should be able to fully customize the effects that they want to use. For simple customizations, this involves feeding a configuration object into a template, but for more complex ones this means that most of the API is exposed and can thusly be used.")),(0,a.kt)("h2",{id:"how-the-library-works"},"How the library works"),(0,a.kt)("p",null,"The library tries it's best to seperate logical systems from each other. The core components include ",(0,a.kt)("strong",{parentName:"p"},"particles"),", ",(0,a.kt)("strong",{parentName:"p"},"emitters"),", the ",(0,a.kt)("strong",{parentName:"p"},"scene")," and the ",(0,a.kt)("strong",{parentName:"p"},"renderer"),", which we will look at in the following paragraphs."),(0,a.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"This section is just meant for users that want to get a better understanding of what happens under the hood. If you just want to know ",(0,a.kt)("em",{parentName:"p"},"how")," to use the library, check out the ",(0,a.kt)("a",{parentName:"p",href:"./"},"quick start")," guide, or the other guides."))),(0,a.kt)("h3",{id:"particles"},"Particles"),(0,a.kt)("p",null,"Particles are essentially just data containers. They do not know how to render themselves, they just know what they consist of, like their position, color or lifetime."),(0,a.kt)("h3",{id:"emitters"},"Emitters"),(0,a.kt)("p",null,"Emitters create particles - it's as straightforward as that. They have an internal store of all particles that they created and are responsible for, as well as emission options that define how and when they emit said particles."),(0,a.kt)("p",null,"The emission behaviour can be customized by specifying the amount of emitted particles per seconds, as well as bursts, which define an instantaneous emission of multiple particles."),(0,a.kt)("p",null,"Additionally, emitters are also responsible for updating (ticking) the particles, updating their values. This means applying the pseudo-physics to displace them, as well as applying any particle modifier modules that are registered on the emitter. These modules change the properties of particles over their lifetime, or are driven by other particle properties, such as their size."),(0,a.kt)("h3",{id:"the-scene"},"The Scene"),(0,a.kt)("p",null,"Scenes contain emitters, and are responsible for updating them. Tick events are scheduled through them and passed down to the emitters, where they are handled appropriately."),(0,a.kt)("h3",{id:"the-renderer"},"The Renderer"),(0,a.kt)("p",null,"The behaviour above has been purely data-driven so far. No actual DOM modifications or canvas drawing has occurred yet. This is where the renderer comes in. It has the very important job of displaying the particles that the emitters are taking care of to the actual user."),(0,a.kt)("p",null,"The procedure is as follows:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"We start a new rendering block. This is done to ensure that we can record certain metadata, such as the list of particles that were actually rendered in the frame."),(0,a.kt)("li",{parentName:"ol"},"We iterate through every emitter and every particle, sequentially telling the renderer to draw each particle. If no HTMLElement for a particle exists yet, the renderer uses a factory to generate one, and applies it to the DOM, inside of a container object. Options for rendering said particles can be defined through the emitter itself, but the defaults are meant to operative as well as they can on the standard HTML elements:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Color is applied adaptively through the particle's HTML tag. ",(0,a.kt)("inlineCode",{parentName:"li"},"div"),"s have their background color set, while ",(0,a.kt)("inlineCode",{parentName:"li"},"svg"),"s have their fill and foreground colors set."),(0,a.kt)("li",{parentName:"ul"},"Opacity is applied through the opacity CSS style."),(0,a.kt)("li",{parentName:"ul"},'Lighting is calculated using the simple "n-dot-l"-model, meaning that we calculate the lighting coefficient as the dot product of the particles surface normal and the direction of the light. The normal direction of the particle is inferred through its rotation.'),(0,a.kt)("li",{parentName:"ul"},"Transformations, such as location and rotation, are applied as CSS transforms."))),(0,a.kt)("li",{parentName:"ol"},"After we're done rendering an individual particle, we push its ID onto a stack of rendered particles. Internally, we are keeping track of every HTMLElement we rendered, and the corresponding particle ID."),(0,a.kt)("li",{parentName:"ol"},"After we end the rendering block we started at the beginning we look through the list of rendered particles, to find out which particles we did ",(0,a.kt)("strong",{parentName:"li"},"not")," render. These are the ones that apparently no longer exist inside any emitters in the scene, and can therefore be removed from the DOM.")))}h.isMDXComponent=!0}}]);